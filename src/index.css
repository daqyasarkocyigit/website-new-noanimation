@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mobile-first approach with enhanced performance */
@layer base {
  html {
    -webkit-tap-highlight-color: transparent;
    scroll-behavior: smooth;
    font-size: 16px; /* Prevent zoom on iOS */
  }

  body {
    @apply text-base antialiased touch-manipulation overscroll-none;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    line-height: 1.6;
    /* Prevent horizontal scroll */
    overflow-x: hidden;
  }

  /* Improved focus styles for accessibility */
  *:focus {
    outline: 2px solid #ef4444;
    outline-offset: 2px;
  }

  /* Better text selection */
  ::selection {
    background-color: #ef4444;
    color: white;
  }
}

/* Enhanced mobile-optimized components */
@layer components {
  .touch-target {
    @apply min-h-[44px] min-w-[44px];
  }

  .btn-primary {
    @apply touch-target px-4 py-3 text-sm md:text-base rounded-lg bg-brand-red-600 text-white font-medium 
    transition-all duration-200 hover:bg-brand-red-700 active:scale-95 
    disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100
    focus:ring-2 focus:ring-brand-red-500 focus:ring-offset-2;
  }

  .btn-secondary {
    @apply touch-target px-4 py-3 text-sm md:text-base rounded-lg border border-brand-red-400 
    text-brand-red-600 font-medium transition-all duration-200 
    hover:bg-brand-red-50 active:scale-95
    disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100
    focus:ring-2 focus:ring-brand-red-500 focus:ring-offset-2;
  }

  .nav-link {
    @apply touch-target relative text-gray-700 hover:text-brand-red-600 transition-colors duration-200
    focus:text-brand-red-600 focus:outline-none;
  }

  .card-hover {
    @apply transition-all duration-200 hover:shadow-lg hover:-translate-y-1 active:scale-[0.98]
    focus-within:shadow-lg focus-within:-translate-y-1;
  }

  /* Section title with responsive sizing */
  .section-title {
    @apply text-xl xs:text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-6 leading-tight;
  }

  /* Container with proper mobile padding */
  .container {
    @apply mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl;
  }

  /* Responsive grid layouts */
  .grid-responsive {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8;
  }

  .grid-responsive-2 {
    @apply grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12;
  }

  /* Mobile-optimized form inputs */
  .form-input {
    @apply w-full px-4 py-3 text-base border border-gray-300 rounded-lg 
    focus:ring-2 focus:ring-brand-red-500 focus:border-brand-red-500 
    transition-colors duration-200 bg-white;
  }

  .form-textarea {
    @apply form-input resize-none min-h-[120px];
  }

  .form-select {
    @apply form-input appearance-none bg-white;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }

  /* Mobile navigation improvements */
  .mobile-nav {
    @apply fixed inset-x-0 top-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-200
    transform transition-transform duration-300 ease-in-out;
  }

  .mobile-nav.hidden {
    @apply -translate-y-full;
  }

  /* Loading states */
  .skeleton {
    @apply animate-pulse bg-gray-200 rounded;
  }

  .loading-spinner {
    @apply animate-spin rounded-full border-2 border-gray-300 border-t-brand-red-600;
  }

  /* Enhanced responsive image containers */
  .responsive-image {
    @apply w-full h-auto object-cover;
    content-visibility: auto;
  }

  .image-container-sm {
    @apply h-32 xs:h-40 sm:h-48;
  }

  .image-container-md {
    @apply h-40 xs:h-48 sm:h-56 md:h-64;
  }

  .image-container-lg {
    @apply h-48 xs:h-56 sm:h-64 md:h-72 lg:h-80;
  }

  .image-container-xl {
    @apply h-56 xs:h-64 sm:h-72 md:h-80 lg:h-96;
  }

  /* Service visual containers - optimized for mobile */
  .service-visual-container {
    @apply relative w-full rounded-xl overflow-hidden shadow-2xl bg-gray-900;
  }

  .service-visual-mobile {
    @apply aspect-[4/3] sm:aspect-[16/10] lg:aspect-[4/3];
  }

  /* Typography improvements */
  .text-responsive {
    @apply text-sm sm:text-base lg:text-lg;
  }

  .text-responsive-lg {
    @apply text-base sm:text-lg lg:text-xl;
  }

  /* Spacing utilities */
  .section-padding {
    @apply py-12 sm:py-16 lg:py-20;
  }

  .section-padding-lg {
    @apply py-16 sm:py-20 lg:py-24;
  }
}

/* Performance and accessibility optimizations */
@layer utilities {
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-right {
    padding-right: env(safe-area-inset-right);
  }

  .no-tap-highlight {
    -webkit-tap-highlight-color: transparent;
  }

  .momentum-scroll {
    -webkit-overflow-scrolling: touch;
  }

  /* GPU acceleration for animations */
  .gpu-accelerated {
    transform: translateZ(0);
    will-change: transform;
  }

  /* Enhanced responsive aspect ratios */
  .aspect-ratio-16-9 {
    aspect-ratio: 16 / 9;
  }

  .aspect-ratio-4-3 {
    aspect-ratio: 4 / 3;
  }

  .aspect-ratio-1-1 {
    aspect-ratio: 1 / 1;
  }

  .aspect-ratio-16-10 {
    aspect-ratio: 16 / 10;
  }

  /* Enhanced responsive breakpoints */
  .xs-only {
    @apply block xs:hidden;
  }

  .sm-up {
    @apply hidden sm:block;
  }

  .md-up {
    @apply hidden md:block;
  }

  .lg-up {
    @apply hidden lg:block;
  }

  /* Text truncation utilities */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Improved focus indicators */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-brand-red-500 focus:ring-offset-2;
  }

  /* Mobile-specific utilities */
  .mobile-only {
    @apply block sm:hidden;
  }

  .desktop-only {
    @apply hidden sm:block;
  }

  .tablet-up {
    @apply hidden md:block;
  }
}

/* Enhanced image optimization */
img {
  @apply responsive-image;
  content-visibility: auto;
  /* Prevent layout shift */
  height: auto;
  /* Improve loading performance */
  loading: lazy;
}

/* Lazy loading support */
img[loading="lazy"] {
  opacity: 0;
  transition: opacity 0.3s;
}

img[loading="lazy"].loaded {
  opacity: 1;
}

/* Reduce motion preferences */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .gpu-accelerated {
    transform: none !important;
    will-change: auto !important;
  }
}

/* Enhanced touch feedback for mobile */
@media (hover: none) and (pointer: coarse) {
  .btn-primary:active,
  .btn-secondary:active,
  .card-hover:active {
    @apply transform scale-[0.98] transition-transform duration-75;
  }
  
  /* Larger touch targets on mobile */
  .touch-target {
    @apply min-h-[48px] min-w-[48px];
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .btn-primary {
    @apply border-2 border-white;
  }
  
  .btn-secondary {
    @apply border-2 border-brand-red-600;
  }
}

/* Optimized scrollbar */
::-webkit-scrollbar {
  @apply w-2;
}

::-webkit-scrollbar-track {
  @apply bg-gray-100;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-300 rounded-full hover:bg-gray-400 transition-colors;
}

/* Print styles */
@media print {
  .no-print {
    display: none !important;
  }
  
  body {
    font-size: 12pt;
    line-height: 1.4;
  }
  
  h1, h2, h3 {
    page-break-after: avoid;
  }
  
  img {
    max-width: 100% !important;
    height: auto !important;
  }
}

/* Custom animations optimized for mobile */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translate3d(0, 20px, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translate3d(-20px, 0, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translate3d(20px, 0, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

/* Utility animations */
.animate-fade-in-up {
  animation: fadeInUp 0.6s ease-out;
}

.animate-fade-in {
  animation: fadeIn 0.6s ease-out;
}

.animate-slide-in-left {
  animation: slideInLeft 0.6s ease-out;
}

.animate-slide-in-right {
  animation: slideInRight 0.6s ease-out;
}

/* Performance optimizations */
.will-change-transform {
  will-change: transform;
}

.will-change-opacity {
  will-change: opacity;
}

/* Remove will-change after animation */
.animation-finished {
  will-change: auto;
}